<template name="5851b71f"><view class="_view 5851b71f grace-im"><scroll-view scroll-y scroll-top="{{scrollTop}}" class="_scroll-view 5851b71f" style=" {{('height:' + (imHeight + 'px') + ';')}}"><view style="height:10px;" class="_view 5851b71f"></view><view class="_view 5851b71f grace-im-msg"><view class="_view 5851b71f grace-im-system-msg" bindtap="handleProxy" data-eventid="{{'5851b71f-0'}}" data-comkey="{{$k}}">{{historyLodginText}}</view></view><block wx:key="index" key="{{index}}" wx:for="{{msgs}}" wx:for-index="index" wx:for-item="item"><view class="_view 5851b71f grace-im-msg {{[userid == item.id ? 'grace-im-msg-right' : 'grace-im-msg-left']}}" wx:if="{{item.ctype == 1}}"><view class="_view 5851b71f face"><image src="{{item.face}}" mode="widthFix" class="_image 5851b71f"></image></view><view class="_view 5851b71f"><view class="_view 5851b71f grace-im-name"><text wx:if="{{userid != item.id}}" class="_text 5851b71f">{{item.name}}</text><text class="_text 5851b71f">{{item.date}}</text></view><view class="_view 5851b71f grace-im-content-in"><view class="_view 5851b71f content">{{item.msg}}</view></view></view></view><view class="_view 5851b71f grace-im-msg {{[userid == item.id ? 'grace-im-msg-right' : 'grace-im-msg-left']}}" wx:if="{{item.ctype == 2}}"><view class="_view 5851b71f face"><image src="{{item.face}}" mode="widthFix" class="_image 5851b71f"></image></view><view class="_view 5851b71f"><view class="_view 5851b71f grace-im-name"><block wx:if="{{userid != item.id}}">{{item.name}}</block><text class="_text 5851b71f">{{item.date}}</text></view><view class="_view 5851b71f grace-im-content-in"><view class="_view 5851b71f imgs"><image src="{{item.msg}}" mode="widthFix" data-index="{{index}}" bindtap="handleProxy" data-eventid="{{'5851b71f-1-'+index}}" data-comkey="{{$k}}" class="_image 5851b71f"></image></view></view></view></view><view class="_view 5851b71f grace-im-msg {{[userid == item.id ? 'grace-im-msg-right' : 'grace-im-msg-left']}}" wx:if="{{item.ctype == 3}}"><view class="_view 5851b71f face"><image src="{{item.face}}" mode="widthFix" class="_image 5851b71f"></image></view><view class="_view 5851b71f"><view class="_view 5851b71f grace-im-name"><block wx:if="{{userid != item.id}}">{{item.name}}</block><text class="_text 5851b71f">{{item.date}}</text></view><view class="_view 5851b71f grace-im-content-in"><view class="_view 5851b71f content grace-im-voice-msg {{index == playIndex ? 'grace-im-playing' : ''}}" data-voice="{{item.msg}}" data-index="{{index}}" bindtap="handleProxy" style="width:300rpx;" data-eventid="{{'5851b71f-2-'+index}}" data-comkey="{{$k}}"><text class="_text 5851b71f graceIMFont icon-audio"></text></view></view></view></view><view class="_view 5851b71f grace-im-msg" wx:if="{{item.ctype == 4}}"><view class="_view 5851b71f grace-im-system-msg">{{item.msg}}</view></view></block><view style="height:20px;" class="_view 5851b71f"></view></scroll-view></view></template>